<!DOCTYPE html>
<html lang="id">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Profil Pegawai</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">
  <meta name="theme-color" content="#5ab2ff" />
  @vite(['resources/css/styles.css'])
  @vite(['resources/css/pegawai-detail.css'])
</head>

<body class="bg-body-secondary theme-light-blue" data-bs-theme="light">
  @include('components/sidebar')
  <div class="main-wrapper d-flex flex-column min-vh-100">
    @include('components/header')
    <main class="flex-grow-1 p-3 p-lg-4">
      {{-- @include('dashboard/components/profil_data_pegawai') --}}
      @!component('dashboard/components/profil_data_pegawai', {
      nama_lengkap: findById.nama_lengkap,
      npy: findById.npy,
      nik: findById.nik,
      npwp: findById.npwp,
      tempat_lahir: findById.tempat_lahir,
      tanggal_lahir: findById.tanggal_lahir,
      jenis_kelamin: findById.jenis_kelamin
      })

      <div class="bento-layout mb-2 mt-2">
        @include('dashboard/components/atribut_akademik')
        @include('dashboard/components/atribut_lain')

      </div>
      <div class="bento-layout mb-2 mt-2">
        @include('dashboard/components/keluarga')
        @include('dashboard/components/kesehatan_fisik')
      </div>
      <div class="bento-layout mb-2 mt-2">
        @include('dashboard/components/riwayat_kesehatan')
        @include('dashboard/components/dokumen')

      </div>
      <div class="bento-layout mb-2 mt-2">
        @include('dashboard/components/pendidikan')
        @include('dashboard/components/aktivitas')
      </div>
      <div class="bento-layout mb-2 mt-2">
        @include('dashboard/components/kuota_cuti')
        @include('dashboard/components/riwayat_cuti')
      </div>
      <div class="bento-layout mb-2 mt-2">
        @include('dashboard/components/pengajuan_cuti')
        @include('dashboard/components/pengajuan_izin')
      </div>
      <div class="bento-layout mb-2 mt-2">
        @include('dashboard/components/riwayat_gaji')
        @include('dashboard/components/riwayat_kepangkatan')

      </div>
      <div class="bento-layout mb-2 mt-2">
        @include('dashboard/components/pelatihan')
        @include('dashboard/components/penghargaan')
      </div>
      <div class="bento-layout mb-2 mt-2">
        @include('dashboard/components/penelitian')
        @include('dashboard/components/pengabdian')
      </div>
      <div class="bento-layout mb-2 mt-2">
        @include('dashboard/components/publikasi')
      </div>
      <div class="bento-layout mb-2 mt-2">
        @include('dashboard/components/ringkasan')
        @include('dashboard/components/catatan')
      </div>
  </div>
  </main>
  @include('components/footer')
  </div>
  <script>
    // Set "Memuat ..." placeholders for fields that haven't been populated by backend yet
    (function () {
      function needsLoadingText(text) {
        if (!text) return true;
        const t = text.trim();
        if (!t) return true;
        // Matches bracket placeholders like [NIDN], or any text still containing [ ... ]
        if (/\[.+\]/.test(t)) return true;
        return false;
      }

      const placeholders = {
        // Profil & Data Pegawai
        namaLengkap: 'Nama Lengkap',
        npy: 'NPY/NIP',
        nik: 'NIK',
        npwp: 'NPWP',
        tempatLahir: 'Tempat Lahir',
        tanggalLahir: 'Tanggal Lahir',
        jenisKelamin: 'Jenis Kelamin',
        unitKerja: 'Unit Kerja',
        jabatan: 'Jabatan',
        statusKepegawaian: 'Status Kepegawaian',
        agama: 'Agama',
        suku: 'Suku',
        emailPribadi: 'Email Pribadi',
        emailKantor: 'Email Kantor',
        noHp: 'No HP',
        noHpDarurat: 'No HP Darurat',
        statusPerkawinan: 'Status Perkawinan',
        alamat: 'Alamat',
        masaKerja: 'Masa Kerja',
        nomorUrut: 'Nomor Urut',
        // Aktivitas
        aktivitas: 'Aktivitas',
        tanggalAktifitas: 'Tanggal Aktivitas',
        // Atribut Akademik
        nidn: 'NIDN',
        nuptk: 'NUPTK',
        programStudi: 'Program Studi',
        fakultas: 'Fakultas',
        jenjang: 'Jenjang',
        npyNip: 'NPY/NIP',
        detUnit: 'Unit Kerja',
        statusKepegawaian: 'Status Kepegawaian',
        detJabatan: 'Jabatan',
        // Atribut Lain
        jabatanPegawaiLain: 'Jabatan Pegawai Lain',
        // Dokumen
        dokumen: 'Dokumen',
        statusDokumen: 'Status Dokumen',
        jenisDokumen: 'Jenis Dokumen',
        // Keluarga
        namaKeluarga: 'Nama Keluarga',
        hubunganKeluarga: 'Hubungan Keluarga',
        // Kesehatan Fisik
        tinggi: 'Tinggi',
        berat: 'Berat',
        golonganDarah: 'Golongan Darah',
        tekananDarah: 'Tekanan Darah',
        alergi: 'Alergi',
        disabilitas: 'Disabilitas',
        catatanKesehatan: 'Catatan Kesehatan',
        // Cuti
        jenisCuti: 'Jenis Cuti',
        jumlahCuti: 'Jumlah Cuti',
        keteranganCuti: 'Keterangan',
        // Pelatihan
        pelatihan: 'Pelatihan',
        tahunPelatihan: 'Tahun Pelatihan',
        // Pendidikan
        jenjangPendidikan: 'Jenjang',
        namaUniversitas: 'Nama Universitas',
        tahunLulus: 'Tahun Lulus',
        // Penelitian
        judulPenelitian: 'Judul Penelitian',
        tahunPenelitian: 'Tahun Penelitian',
        // Pengabdian
        judulPengabdian: 'Judul Pengabdian',
        tahunPengabdian: 'Tahun Pengabdian',
        // Pengajuan (Cuti/Izin)
        filePengajuan: 'File Pengajuan',
        tanggalPengajuan: 'Tanggal Pengajuan',
        jenisIzin: 'Jenis Izin',
        // Penghargaan
        penghargaan: 'Penghargaan',
        tahunPenghargaan: 'Tahun Penghargaan',
        // Gaji
        periodeGaji: 'Periode',
        jumlahGaji: 'Jumlah Gaji',
        // Kepangkatan
        golonganRuangJabatan: 'Golongan/Ruang/Jabatan',
        tmt: 'TMT',
        // Riwayat Kesehatan
        jenisPenyakit: 'Jenis Penyakit',
        keterangan: 'Keterangan',
        tanggalDiagnosa: 'Tanggal Diagnosa',
        // Publikasi
        judulPublikasi: 'Judul Publikasi',
        tahunPublikasi: 'Tahun Publikasi',
        // Ringkasan
        jabatan: 'Jabatan',
        unitKerja: 'Unit Kerja',
        statusKepegawaian: 'Status Kepegawaian',
      };

      document.addEventListener('DOMContentLoaded', function () {
        // For text/spans/divs with duplicated ids, querySelectorAll by attribute to cover all occurrences
        Object.entries(placeholders).forEach(([id, label]) => {
          document.querySelectorAll(`[id="${id}"]`).forEach((el) => {
            const current = (el.textContent || '').trim();
            if (needsLoadingText(current)) {
              el.textContent = `Memuat ${label}...`;
            }
          });
        });

        // For textarea catatan: set placeholder when empty
        const catatan = document.getElementById('catatan');
        if (catatan && !catatan.value) {
          if (!catatan.placeholder || /\[.+\]/.test(catatan.placeholder) || /Catatan internal/.test(catatan.placeholder)) {
            catatan.placeholder = 'Memuat Catatan...';
          }
        }
      });
    })();
  </script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/umd/bootstrap.bundle.min.js"></script>
</body>

</html>