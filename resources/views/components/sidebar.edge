<nav id="sidebar" class="sidebar bg-dark text-white" data-active-path="{{ activePath || '' }}">
  <div class="d-flex align-items-center p-3 border-bottom border-secondary">
    <i class="bi bi-grid-1x2-fill fs-4 me-2 text-primary"></i>
    <span class="fw-semibold fs-5">Sistem HC</span>
<<<<<<< HEAD
    <button class="btn btn-sm btn-outline-light ms-auto d-lg-none" id="btnCloseSidebar"> <i
        class="bi bi-x-lg"></i></button>
=======
    <button class="btn btn-sm btn-outline-light ms-auto d-lg-none" id="btnCloseSidebar">
      <i class="bi bi-x-lg"></i>
    </button>
>>>>>>> origin/development
  </div>

  <div class="px-3 pt-3">
    <div class="small text-uppercase opacity-75 mb-2">Navigasi Utama</div>

    <ul class="nav nav-pills flex-column gap-1">
      <li class="nav-item">
<<<<<<< HEAD
        <a class="nav-link text-white d-flex align-items-center active" href="{{ route('/dashboard') }}"> <i
            class="bi bi-speedometer2 me-2"></i>Dashboard</a>
      </li>
      <li>
        <a class="nav-link text-white d-flex align-items-center" href="{{ route('/dashboard/users') }}"> <i
            class="bi bi-people me-2"></i>
          Users</a>
      </li>
      <li>
        <a class="nav-link text-white d-flex align-items-center" href="{{ route('/dashboard/pegawai') }}"> <i
            class="bi bi-person-vcard me-2"></i>Pegawai</a>
      </li>
      <li>
        <a class="nav-link text-white d-flex align-items-center" href="{{ route('/dashboard/penelitian') }}"> <i
            class="bi bi-journal-bookmark me-2"></i>Penelitian</a>
=======
        <a
          class="nav-link text-white d-flex align-items-center @if(activePath && activePath.replace(/\/$/, '') === '/dashboard') active bg-primary text-white @endif"
          href="{{ route('/dashboard') }}"
        >
          <i class="bi bi-speedometer2 me-2"></i>
          Dashboard
        </a>
>>>>>>> origin/development
      </li>

      <li>
<<<<<<< HEAD
        <a class="nav-link text-white d-flex align-items-center" href="{{ route('/dashboard/pengabdian') }}"> <i
            class="bi bi-hand-thumbs-up me-2"></i>Pengabdian</a>
=======
        <a class="nav-link text-white d-flex align-items-center @if(activePath && activePath.replace(/\/$/, '').startsWith('/dashboard/users')) active bg-primary text-white @endif" href="{{ route('/dashboard/users') }}">
          <i class="bi bi-people me-2"></i>
          Users
        </a>
>>>>>>> origin/development
      </li>

      <li>
        <a class="nav-link text-white d-flex align-items-center @if(activePath && activePath.replace(/\/$/, '').startsWith('/dashboard/pegawai')) active bg-primary text-white @endif" href="{{ route('/dashboard/pegawai') }}">
          <i class="bi bi-person-vcard me-2"></i>
          Pegawai
        </a>
      </li>

      <li>
        <a class="nav-link text-white d-flex align-items-center @if(activePath && activePath.replace(/\/$/, '').startsWith('/dashboard/penelitian')) active bg-primary text-white @endif" href="{{ route('/dashboard/penelitian') }}">
          <i class="bi bi-journal-bookmark me-2"></i>
          Penelitian
        </a>
      </li>

      <li>
        <a class="nav-link text-white d-flex align-items-center @if(activePath && activePath.replace(/\/$/, '').startsWith('/dashboard/pengabdian')) active bg-primary text-white @endif" href="{{ route('/dashboard/pengabdian') }}">
          <i class="bi bi-hand-thumbs-up me-2"></i>
          Pengabdian
        </a>
      </li>

      <li class="nav-item">
        <div class="d-flex align-items-center">
<<<<<<< HEAD

          <a class="nav-link text-white flex-grow-1 d-flex align-items-center" href="{{ route('/dashboard/cuti') }}"> <i
              class="bi bi-calendar-check me-2"></i> <span>Cuti</span></a>
          <button class="btn btn-sm btn-link text-white p-0 ms-1 nav-caret-btn" data-bs-toggle="collapse"
            data-bs-target="#collapse-cuti" aria-expanded="false" aria-controls="collapse-cuti"
            title="Tampilkan submenu"> <i class="bi bi-chevron-down"></i></button>
=======
          <a
            class="nav-link text-white flex-grow-1 d-flex align-items-center @if(activePath && (activePath.replace(/\/$/, '').startsWith('/dashboard/cuti') || activePath.replace(/\/$/, '').startsWith('/dashboard/sakit') || activePath.replace(/\/$/, '').startsWith('/dashboard/izin'))) active bg-primary text-white @endif"
            href="{{ route('/dashboard/cuti') }}"
          >
            <i class="bi bi-calendar-check me-2"></i>
            <span>Cuti</span>
          </a>

          <button
            class="btn btn-sm btn-link text-white p-0 ms-1 nav-caret-btn"
            data-bs-toggle="collapse"
            data-bs-target="#collapse-cuti"
            aria-expanded="false"
            aria-controls="collapse-cuti"
            title="Tampilkan submenu"
          >
            <i class="bi bi-chevron-down"></i>
          </button>
>>>>>>> origin/development
        </div>

        <ul class="nav flex-column collapse ps-4 mt-1 @if(activePath && (activePath.replace(/\/$/, '').startsWith('/dashboard/cuti') || activePath.replace(/\/$/, '').startsWith('/dashboard/sakit') || activePath.replace(/\/$/, '').startsWith('/dashboard/izin'))) show @endif" id="collapse-cuti">
          <li>
<<<<<<< HEAD
            <a class="nav-link text-white d-flex align-items-center" href="{{ route('/dashboard/sakit') }}"> <i
                class="bi bi-emoji-dizzy me-2"></i>Pengajuan Sakit</a>
=======
            <a class="nav-link text-white d-flex align-items-center @if(activePath && activePath.replace(/\/$/, '').startsWith('/dashboard/sakit')) active bg-primary text-white @endif" href="{{ route('/dashboard/sakit') }}">
              <i class="bi bi-emoji-dizzy me-2"></i>
              Pengajuan Sakit
            </a>
>>>>>>> origin/development
          </li>

          <li>
<<<<<<< HEAD
            <a class="nav-link text-white d-flex align-items-center" href="{{ route('/dashboard/izin') }}"> <i
                class="bi bi-calendar-event me-2"></i>Pengajuan Izin</a>
=======
            <a class="nav-link text-white d-flex align-items-center @if(activePath && activePath.replace(/\/$/, '').startsWith('/dashboard/izin')) active bg-primary text-white @endif" href="{{ route('/dashboard/izin') }}">
              <i class="bi bi-calendar-event me-2"></i>
              Pengajuan Izin
            </a>
>>>>>>> origin/development
          </li>
        </ul>
      </li>
    </ul>

    <hr class="border-secondary" />

    <div class="small text-uppercase opacity-75 mb-2">Pengaturan</div>
    <ul class="nav nav-pills flex-column gap-1 mb-4">
      <li>
<<<<<<< HEAD
        <a class="nav-link text-white d-flex align-items-center" href="#"> <i class="bi bi-gear me-2"></i>
          Sistem</a>
      </li>
      <li>
        <a class="nav-link text-white d-flex align-items-center" href="#"> <i class="bi bi-shield-lock me-2"></i>
          Akses</a>
=======
        <a class="nav-link text-white d-flex align-items-center" href="#">
          <i class="bi bi-gear me-2"></i>
          Sistem
        </a>
      </li>
      <li>
        <a class="nav-link text-white d-flex align-items-center" href="#">
          <i class="bi bi-shield-lock me-2"></i>
          Akses
        </a>
>>>>>>> origin/development
      </li>
      <li>
<<<<<<< HEAD
        <a class="nav-link text-white d-flex align-items-center" id="logoutSidebar" href="{{ route('logout') }}"> <i
            class="bi bi-box-arrow-right me-2"></i>Keluar</a>
=======
        <a class="nav-link text-white d-flex align-items-center" id="logoutSidebar" href="{{ route('logout') }}">
          <i class="bi bi-box-arrow-right me-2"></i>
          Keluar
        </a>
>>>>>>> origin/development
      </li>
    </ul>
  </div>
<<<<<<< HEAD
  {{-- #NOTE ambil data user. [picture,name,email] --}}
=======

>>>>>>> origin/development
  <div class="p-3 border-top border-secondary small">
    <div class="d-flex align-items-center">
      <img src="" alt=" avatar" class="avatar me-2" />
      <div>
<<<<<<< HEAD
        <div class="fw-semibold">
        </div>
        <div class="small opacity-75">
        </div>
=======
        <div class="fw-semibold">{{ user.name }}</div>
        <div class="small opacity-75">{{ user.email }}</div>
>>>>>>> origin/development
      </div>
    </div>
    <div class="mt-2 small text-muted"><strong>DEBUG activePath:</strong> {{ activePath || 'no activePath provided' }}</div>
  </div>
<<<<<<< HEAD
</nav>
=======
</nav>

<script>
  // Client-side fallback to reliably mark active sidebar link.
  // This normalizes paths, supports absolute/relative hrefs, and chooses the longest-prefix match.
  (function () {
    try {
      // Prefer server-shared activePath when available (injected via data-active-path)
      const sidebar = document.getElementById('sidebar')
      const serverActive = sidebar ? (sidebar.dataset.activePath || '').replace(/\/$/, '') : ''
      const current = serverActive || (location.pathname || '/').replace(/\/$/, '')

      const links = Array.from(document.querySelectorAll('#sidebar a.nav-link'))

      // clear existing active classes first to avoid duplicates
      links.forEach((l) => l.classList.remove('active', 'bg-primary', 'text-white'))

      let best = null
      links.forEach((a) => {
        try {
          const href = a.getAttribute('href') || ''
          const url = new URL(href, location.origin)
          const path = (url.pathname || '/').replace(/\/$/, '')

          if (path === current) {
            best = { el: a, len: path.length }
            return
          }

          if (path !== '/' && (current + '/').indexOf(path + '/') === 0) {
            const len = path.length
            if (!best || len > best.len) best = { el: a, len }
          }
        } catch (e) {
          // ignore malformed hrefs
        }
      })

      if (best && best.el) {
        best.el.classList.add('active', 'bg-primary', 'text-white')
        const collapseParent = best.el.closest('.collapse')
        if (collapseParent) {
          collapseParent.classList.add('show')
          const btn = document.querySelector('[data-bs-target="#' + collapseParent.id + '"]')
          if (btn) btn.setAttribute('aria-expanded', 'true')
        }
      }
    } catch (e) {
      console.warn('sidebar active script error', e)
    }
  })()
</script>
>>>>>>> origin/development
